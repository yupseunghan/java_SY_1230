<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>비동기 - Promise</title>
</head>
<body>
	
	<script>
		/* 
		동기
		  - 앞 작업이 다 끝나야 뒤 작업이 실행됨
		비동기
		  - 앞 작업이 다 끝나지 않아도 뒤 작업이 실행되는 상황.
			- 이 때, 앞 작업을 비동기로 해야 함
		*/
		/* 
		Promise 객체
		  - 비동기 작업을 할 수 있게 하는 객체
			- 성공했을 때 호출하는 resolve 함수, 실패 했을 때 실행하는 reject 함수가 필요.
			- then(콜백함수)
			  - 성공했을 때 호출하는 콜백함수 resolve를 넘겨 줌
			- catch(콜백함수)
			  - 실패했을 때 호출하는 콜백함수 reject를 넘겨줌
			- finllay(콜백함수)
			  - 성공, 실패 여부 상관 없이 마지막에 호출되는 콜백함수를 넘겨줌
		*/
		function increase(n){
			return new Promise((resolve, reject)=>{
				setTimeout(()=>{
					document.write(`${n+1}<br>`);
					if(resolve){
						resolve(n+1);
					}
				}, 1000);
			});
		}
		increase(0)
			.then((n)=>{
				return increase(n);
			})
			.then((n)=>increase(n))
			.then((n)=>increase(n))
			.then((n)=>increase(n))
			.then((n)=>document.write("종료<br>"));
		document.write("마지막 작업<br>");
	</script>
</body>
</html>